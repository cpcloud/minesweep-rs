{
  "branches": ["main"],
  "plugins": [
    "@semantic-release/commit-analyzer",
    "@semantic-release/release-notes-generator",
    ["@semantic-release/changelog", { "changelogTitle": "# Release Notes" }],
    [
      "@semantic-release/exec",
      {
        "verifyConditionsCmd": "nix-shell --pure --run 'cargo generate-lockfile --locked'",
        "prepareCmd": "./ci/release/replace_version.sh ${lastRelease.version} ${nextRelease.version} && nix-shell --pure --run 'cargo generate-lockfile --offline' && rm -f .git/hooks/pre-commit",
        "publishCmd": "nix-shell --run 'cargo publish'"
      }
    ],
    "@semantic-release/github",
    [
      "@semantic-release/git",
      { "assets": ["Cargo.toml", "Cargo.lock", "CHANGELOG.md"] }
    ]
  ]
}
